import { React, useContext, useState, useEffect } from "react";
import { AuthContext } from "../../context/AuthContext";
import styles from "./navbar.module.scss"
import { NavLink, useLocation } from "react-router-dom";
import Avatar from "./avatar";



function Navbar() {
  const { handleLogOut, data } = useContext(AuthContext);
  // Деструктуризация пропсов

  // Значения по умолчанию для ссылок
  const location = useLocation(); // Получаем текущий путь
  console.log(location)
  // Функция для определения активного класса
  const isActive = (path) => {
    return location.pathname === path ? styles.active : "";
  };

  // Использование переданных ссылок или значений по умолчанию

  return (
    <nav className={`${styles.navbar} flex flex-col h-full bg-[#ffffff] px-4 pb-8 text-base justify-between items-center `}>
      <div className="flex flex-col gap-2">
      <ul className="flex flex-col  pt-4 text-gray-500  w-full">
      <NavLink to="/" activeClassName="active" className={`${styles.nav} ${isActive("/")}`} >
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20" fill="none">
                    <path d="M17.5 9.02699V16.2496C17.5 16.5812 17.3683 16.8991 17.1339 17.1335C16.8995 17.368 16.5815 17.4996 16.25 17.4996H13.125C12.7935 17.4996 12.4755 17.368 12.2411 17.1335C12.0067 16.8991 11.875 16.5812 11.875 16.2496V13.1246C11.875 12.9589 11.8092 12.7999 11.6919 12.6827C11.5747 12.5655 11.4158 12.4996 11.25 12.4996H8.75C8.58424 12.4996 8.42527 12.5655 8.30806 12.6827C8.19085 12.7999 8.125 12.9589 8.125 13.1246V16.2496C8.125 16.5812 7.9933 16.8991 7.75888 17.1335C7.52446 17.368 7.20652 17.4996 6.875 17.4996H3.75C3.41848 17.4996 3.10054 17.368 2.86612 17.1335C2.6317 16.8991 2.5 16.5812 2.5 16.2496V9.02699C2.49997 8.85399 2.53586 8.68287 2.60538 8.52445C2.67491 8.36604 2.77656 8.22378 2.90391 8.10668L9.15391 2.2098L9.1625 2.20121C9.39261 1.99194 9.69248 1.87598 10.0035 1.87598C10.3146 1.87598 10.6144 1.99194 10.8445 2.20121C10.8472 2.20427 10.8501 2.20714 10.8531 2.2098L17.1031 8.10668C17.2292 8.2244 17.3295 8.36693 17.3978 8.52532C17.4661 8.6837 17.5009 8.85451 17.5 9.02699Z" fill="#4b5563"/>
            </svg>
              Главная
          </NavLink >
          <NavLink to="/liderboard" className={`${styles.nav} ${isActive("/liderboard")}`} >
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20" fill="none">
            <path d="M16.875 3.125H3.125C2.79348 3.125 2.47554 3.2567 2.24112 3.49112C2.0067 3.72554 1.875 4.04348 1.875 4.375V15.625C1.875 15.9565 2.0067 16.2745 2.24112 16.5089C2.47554 16.7433 2.79348 16.875 3.125 16.875H4.17109C4.28938 16.875 4.40525 16.8415 4.50524 16.7783C4.60522 16.7151 4.68522 16.6248 4.73594 16.518C5.03986 15.8763 5.5197 15.3341 6.11965 14.9544C6.71959 14.5748 7.415 14.3732 8.125 14.3732C8.835 14.3732 9.53041 14.5748 10.1304 14.9544C10.7303 15.3341 11.2101 15.8763 11.5141 16.518C11.5648 16.6248 11.6448 16.7151 11.7448 16.7783C11.8448 16.8415 11.9606 16.875 12.0789 16.875H16.875C17.2065 16.875 17.5245 16.7433 17.7589 16.5089C17.9933 16.2745 18.125 15.9565 18.125 15.625V4.375C18.125 4.04348 17.9933 3.72554 17.7589 3.49112C17.5245 3.2567 17.2065 3.125 16.875 3.125ZM8.125 13.125C7.63055 13.125 7.1472 12.9784 6.73607 12.7037C6.32495 12.429 6.00452 12.0385 5.8153 11.5817C5.62608 11.1249 5.57657 10.6222 5.67304 10.1373C5.7695 9.65232 6.0076 9.20686 6.35723 8.85723C6.70686 8.5076 7.15232 8.2695 7.63727 8.17304C8.12223 8.07657 8.62489 8.12608 9.08171 8.3153C9.53852 8.50452 9.92897 8.82495 10.2037 9.23607C10.4784 9.6472 10.625 10.1305 10.625 10.625C10.625 11.288 10.3616 11.9239 9.89277 12.3928C9.42393 12.8616 8.78804 13.125 8.125 13.125ZM16.875 15.625H12.4555C12.183 15.1552 11.8357 14.733 11.4273 14.375H15C15.1658 14.375 15.3247 14.3092 15.4419 14.1919C15.5592 14.0747 15.625 13.9158 15.625 13.75V6.25C15.625 6.08424 15.5592 5.92527 15.4419 5.80806C15.3247 5.69085 15.1658 5.625 15 5.625H5C4.83424 5.625 4.67527 5.69085 4.55806 5.80806C4.44085 5.92527 4.375 6.08424 4.375 6.25V13.75C4.37493 13.8886 4.42094 14.0233 4.5058 14.1329C4.59065 14.2425 4.70954 14.3208 4.84375 14.3555C4.42595 14.7175 4.07136 15.1465 3.79453 15.625H3.125V4.375H16.875V15.625Z" fill="#4b5563"/>
            </svg>
           Доска лидеров
            </NavLink >
            <NavLink to="/achievements" className={`${styles.nav} ${isActive("/achievements")}`} >
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20" fill="none">
            <path d="M18.3203 8.93578L14.7969 12.0108L15.8524 16.5889C15.9082 16.8282 15.8923 17.0787 15.8065 17.309C15.7208 17.5394 15.5691 17.7393 15.3703 17.8839C15.1716 18.0284 14.9346 18.1112 14.6891 18.1218C14.4436 18.1324 14.2004 18.0704 13.9899 17.9436L9.99689 15.5217L6.01252 17.9436C5.80202 18.0704 5.55881 18.1324 5.31328 18.1218C5.06775 18.1112 4.83079 18.0284 4.63204 17.8839C4.4333 17.7393 4.28157 17.5394 4.19584 17.309C4.1101 17.0787 4.09416 16.8282 4.15002 16.5889L5.20392 12.0155L1.6797 8.93578C1.49331 8.77502 1.35852 8.5628 1.29225 8.32574C1.22598 8.08868 1.23117 7.83733 1.30718 7.60321C1.38319 7.36909 1.52663 7.16262 1.71952 7.0097C1.9124 6.85678 2.14614 6.76421 2.39142 6.74359L7.03674 6.34125L8.85002 2.01625C8.94471 1.78931 9.10443 1.59546 9.30907 1.45911C9.51371 1.32276 9.75411 1.25 10 1.25C10.2459 1.25 10.4863 1.32276 10.691 1.45911C10.8956 1.59546 11.0553 1.78931 11.15 2.01625L12.9688 6.34125L17.6125 6.74359C17.8578 6.76421 18.0915 6.85678 18.2844 7.0097C18.4773 7.16262 18.6207 7.36909 18.6968 7.60321C18.7728 7.83733 18.778 8.08868 18.7117 8.32574C18.6454 8.5628 18.5106 8.77502 18.3242 8.93578H18.3203Z" fill="#4b5563"/>
          </svg>
            Достижения
            </NavLink >
          <div className="border-b border-gray-200 pb-4 w-full">
          <NavLink to="/shop" className={`${styles.nav} ${isActive("/shop")}`} >
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20" fill="none">
            <path d="M18.125 7.5C18.1253 7.44189 18.1174 7.38403 18.1016 7.32812L16.9805 3.40625C16.9051 3.14603 16.7476 2.91716 16.5315 2.75382C16.3153 2.59049 16.0522 2.50145 15.7812 2.5H4.21875C3.94784 2.50145 3.68467 2.59049 3.46853 2.75382C3.25239 2.91716 3.09488 3.14603 3.01953 3.40625L1.89922 7.32812C1.88308 7.38399 1.87493 7.44185 1.875 7.5V8.75C1.875 9.23514 1.98795 9.71362 2.20492 10.1475C2.42188 10.5815 2.73689 10.9589 3.125 11.25V16.25C3.125 16.5815 3.2567 16.8995 3.49112 17.1339C3.72554 17.3683 4.04348 17.5 4.375 17.5H15.625C15.9565 17.5 16.2745 17.3683 16.5089 17.1339C16.7433 16.8995 16.875 16.5815 16.875 16.25V11.25C17.2631 10.9589 17.5781 10.5815 17.7951 10.1475C18.012 9.71362 18.125 9.23514 18.125 8.75V7.5ZM6.875 8.75C6.87489 9.07243 6.79163 9.38938 6.63327 9.67023C6.47492 9.95109 6.24681 10.1864 5.97099 10.3533C5.69516 10.5203 5.38094 10.6133 5.05867 10.6234C4.7364 10.6335 4.41698 10.5603 4.13125 10.4109C4.08777 10.3771 4.03995 10.3492 3.98906 10.3281C3.72428 10.1586 3.50637 9.92524 3.35538 9.64947C3.20439 9.3737 3.12517 9.0644 3.125 8.75V8.125H6.875V8.75ZM11.875 8.75C11.875 9.24728 11.6775 9.72419 11.3258 10.0758C10.9742 10.4275 10.4973 10.625 10 10.625C9.50272 10.625 9.02581 10.4275 8.67418 10.0758C8.32254 9.72419 8.125 9.24728 8.125 8.75V8.125H11.875V8.75ZM16.875 8.75C16.8747 9.06447 16.7954 9.37382 16.6443 9.6496C16.4931 9.92537 16.2751 10.1587 16.0102 10.3281C15.9599 10.3493 15.9127 10.3769 15.8695 10.4102C15.5838 10.5597 15.2644 10.633 14.9421 10.6231C14.6198 10.6131 14.3055 10.5202 14.0296 10.3533C13.7536 10.1864 13.5254 9.95115 13.367 9.6703C13.2085 9.38944 13.1252 9.07247 13.125 8.75V8.125H16.875V8.75Z" fill="#4b5563"/>
          </svg>
              Магазин
              </NavLink >
          </div>
          
      </ul>
      <ul className="flex flex-col pb-12 text-gray-500  w-full">
        
      <NavLink to="/tests" className={`${styles.nav} ${isActive("/tests")}`} >
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20" fill="none">
            <path d="M17.5 4.375V5.625C17.5 5.79076 17.4342 5.94973 17.3169 6.06694C17.1997 6.18415 17.0408 6.25 16.875 6.25H7.5C7.33424 6.25 7.17527 6.18415 7.05806 6.06694C6.94085 5.94973 6.875 5.79076 6.875 5.625V4.375C6.875 4.20924 6.94085 4.05027 7.05806 3.93306C7.17527 3.81585 7.33424 3.75 7.5 3.75H16.875C17.0408 3.75 17.1997 3.81585 17.3169 3.93306C17.4342 4.05027 17.5 4.20924 17.5 4.375ZM4.375 3.75H3.125C2.95924 3.75 2.80027 3.81585 2.68306 3.93306C2.56585 4.05027 2.5 4.20924 2.5 4.375V5.625C2.5 5.79076 2.56585 5.94973 2.68306 6.06694C2.80027 6.18415 2.95924 6.25 3.125 6.25H4.375C4.54076 6.25 4.69973 6.18415 4.81694 6.06694C4.93415 5.94973 5 5.79076 5 5.625V4.375C5 4.20924 4.93415 4.05027 4.81694 3.93306C4.69973 3.81585 4.54076 3.75 4.375 3.75ZM16.875 8.75H7.5C7.33424 8.75 7.17527 8.81585 7.05806 8.93306C6.94085 9.05027 6.875 9.20924 6.875 9.375V10.625C6.875 10.7908 6.94085 10.9497 7.05806 11.0669C7.17527 11.1842 7.33424 11.25 7.5 11.25H16.875C17.0408 11.25 17.1997 11.1842 17.3169 11.0669C17.4342 10.9497 17.5 10.7908 17.5 10.625V9.375C17.5 9.20924 17.4342 9.05027 17.3169 8.93306C17.1997 8.81585 17.0408 8.75 16.875 8.75ZM4.375 8.75H3.125C2.95924 8.75 2.80027 8.81585 2.68306 8.93306C2.56585 9.05027 2.5 9.20924 2.5 9.375V10.625C2.5 10.7908 2.56585 10.9497 2.68306 11.0669C2.80027 11.1842 2.95924 11.25 3.125 11.25H4.375C4.54076 11.25 4.69973 11.1842 4.81694 11.0669C4.93415 10.9497 5 10.7908 5 10.625V9.375C5 9.20924 4.93415 9.05027 4.81694 8.93306C4.69973 8.81585 4.54076 8.75 4.375 8.75ZM16.875 13.75H7.5C7.33424 13.75 7.17527 13.8158 7.05806 13.9331C6.94085 14.0503 6.875 14.2092 6.875 14.375V15.625C6.875 15.7908 6.94085 15.9497 7.05806 16.0669C7.17527 16.1842 7.33424 16.25 7.5 16.25H16.875C17.0408 16.25 17.1997 16.1842 17.3169 16.0669C17.4342 15.9497 17.5 15.7908 17.5 15.625V14.375C17.5 14.2092 17.4342 14.0503 17.3169 13.9331C17.1997 13.8158 17.0408 13.75 16.875 13.75ZM4.375 13.75H3.125C2.95924 13.75 2.80027 13.8158 2.68306 13.9331C2.56585 14.0503 2.5 14.2092 2.5 14.375V15.625C2.5 15.7908 2.56585 15.9497 2.68306 16.0669C2.80027 16.1842 2.95924 16.25 3.125 16.25H4.375C4.54076 16.25 4.69973 16.1842 4.81694 16.0669C4.93415 15.9497 5 15.7908 5 15.625V14.375C5 14.2092 4.93415 14.0503 4.81694 13.9331C4.69973 13.8158 4.54076 13.75 4.375 13.75Z" fill="#4b5563"/>
          </svg>
            Задания
            </NavLink >


      </ul>
      </div>

      <div className={styles.info}>
        <div className="size-12 min-w-12"><Avatar></Avatar></div>
        <div className="flex flex-col gap-0 w-full">
          <span className="text-black font-medium ">{data.user.name}</span>
          <span className="text-gray-500 leading-none">{data.user.login}</span>
        </div>
        <div className="bg-[#f9fafb] rounded-xl size-12 min-w-12 flex justify-center items-center hover:bg-gray-100" onClick={handleLogOut}>
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="25" viewBox="0 0 24 25" fill="none">
          <path d="M10.5 20.75C10.5 20.9489 10.421 21.1397 10.2803 21.2803C10.1397 21.421 9.94891 21.5 9.75 21.5H4.5C4.10218 21.5 3.72064 21.342 3.43934 21.0607C3.15804 20.7794 3 20.3978 3 20V5C3 4.60218 3.15804 4.22064 3.43934 3.93934C3.72064 3.65804 4.10218 3.5 4.5 3.5H9.75C9.94891 3.5 10.1397 3.57902 10.2803 3.71967C10.421 3.86032 10.5 4.05109 10.5 4.25C10.5 4.44891 10.421 4.63968 10.2803 4.78033C10.1397 4.92098 9.94891 5 9.75 5H4.5V20H9.75C9.94891 20 10.1397 20.079 10.2803 20.2197C10.421 20.3603 10.5 20.5511 10.5 20.75ZM20.7806 11.9694L17.0306 8.21937C16.9257 8.11437 16.792 8.04284 16.6465 8.01385C16.5009 7.98487 16.35 7.99972 16.2129 8.05653C16.0758 8.11335 15.9586 8.20957 15.8762 8.33301C15.7938 8.45646 15.7499 8.60158 15.75 8.75V11.75H9.75C9.55109 11.75 9.36032 11.829 9.21967 11.9697C9.07902 12.1103 9 12.3011 9 12.5C9 12.6989 9.07902 12.8897 9.21967 13.0303C9.36032 13.171 9.55109 13.25 9.75 13.25H15.75V16.25C15.7499 16.3984 15.7938 16.5435 15.8762 16.667C15.9586 16.7904 16.0758 16.8867 16.2129 16.9435C16.35 17.0003 16.5009 17.0151 16.6465 16.9861C16.792 16.9572 16.9257 16.8856 17.0306 16.7806L20.7806 13.0306C20.8504 12.961 20.9057 12.8783 20.9434 12.7872C20.9812 12.6962 21.0006 12.5986 21.0006 12.5C21.0006 12.4014 20.9812 12.3038 20.9434 12.2128C20.9057 12.1217 20.8504 12.039 20.7806 11.9694Z" fill="#7B7F86"/>
        </svg>
        </div>
      </div>
      
    </nav>
  );
}

export default Navbar;
